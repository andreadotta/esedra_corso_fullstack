<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>JSON</title>
  </head>
  <body>
  <input type="text" id="prodotto" />
  <input type="number" id="quantita" />
  <button onClick="aggiungi()">aggiungi</button>
    <div>
    	<ul id="lista">
    	</ul>
    </div> 
    <div>
    	<h2>Lista della spesa in formato json</h2>
    	<div id="json">
    	</div>
    </div> 
  <script type="text/javascript">
  	var listaSpesa = [];
 	function aggiungi(){
	  	listaSpesa.push({
	  		prodotto: document.getElementById("prodotto").value,
	  		quantita: document.getElementById("quantita").value,
	  	});
	  	stampa();
 	}
 	function stampa(){
 		let righe = "";
 		
 		for(let i = 0; i<listaSpesa.length; i++){
 			righe += "<li>"+listaSpesa[i].prodotto+" "+listaSpesa[i].quantita+"</li>";
 		}
 		document.getElementById("lista").innerHTML=righe;
 		
 		document.getElementById("json").innerHTML=JSON.stringify(listaSpesa);

 		let strListaSpesa = JSON.stringify(listaSpesa);
 		
 		
 		const http = new XMLHttpRequest();

 		const url = "http://localhost:8000/";
 		http.open("POST", url);
 		http.setRequestHeader('Content-Type', 'application/json');
 		http.send(strListaSpesa);
 	}
  </script>
  	
  
  </body>
</html>